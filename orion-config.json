{
  "hardware": {
    "manufacturer": "Dell",
    "model": "PowerEdge R730",
    "serviceTag": "CQ5QBM2",
    "cpu": {
      "model": "Intel Xeon E5-2690 v4",
      "sockets": 2,
      "coresPerSocket": 14,
      "threadsPerCore": 2,
      "totalCores": 28,
      "totalThreads": 56
    },
    "memory": {
      "total": "384GB",
      "modules": [
        {
          "slot": "A1-A6",
          "size": "32GB",
          "type": "DDR4-2400",
          "manufacturer": "Samsung"
        },
        {
          "slot": "B1-B6",
          "size": "32GB",
          "type": "DDR4-2400",
          "manufacturer": "Samsung"
        }
      ]
    },
    "storage": {
      "controller": "PERC H730 Mini",
      "raidLevel": "RAID 10",
      "disks": []
    },
    "networkInterfaces": [
      {
        "name": "eno1",
        "mac": "D0:94:66:24:96:7C",
        "speed": "1GbE",
        "type": "Integrated",
        "purpose": "Proxmox Management"
      },
      {
        "name": "eno2",
        "mac": "D0:94:66:24:96:7D",
        "speed": "1GbE",
        "type": "Integrated",
        "purpose": "Reserved"
      },
      {
        "name": "eno3",
        "mac": "D0:94:66:24:96:7E",
        "speed": "10GbE",
        "type": "Integrated",
        "purpose": "WAN (Telus Fiber)",
        "bridge": "vmbr0"
      },
      {
        "name": "eno4",
        "mac": "D0:94:66:24:96:80",
        "speed": "10GbE",
        "type": "Integrated",
        "purpose": "LAN (Internal Network)",
        "bridge": "vmbr1"
      },
      {
        "name": "eno5",
        "mac": "",
        "speed": "10GbE",
        "type": "Integrated",
        "purpose": "macOS VM Network",
        "bridge": "vmbr2"
      },
      {
        "name": "eno6",
        "mac": "",
        "speed": "10GbE",
        "type": "Integrated",
        "purpose": "Storage Network",
        "bridge": "vmbr3"
      },
      {
        "name": "enp3s0f0",
        "mac": "",
        "speed": "10GbE",
        "type": "Slot 3",
        "purpose": "Router VM Passthrough (Optional)"
      },
      {
        "name": "enp3s0f1",
        "mac": "",
        "speed": "10GbE",
        "type": "Slot 3",
        "purpose": "Router VM Passthrough (Optional)"
      }
    ]
  },
  "network": {
    "proxmox": {
      "hostname": "orion-pve.local",
      "ip": "192.168.100.10",
      "netmask": "24",
      "gateway": "192.168.100.1",
      "dns": ["1.1.1.1", "8.8.8.8"],
      "managementInterface": "eno1"
    },
    "bridges": {
      "vmbr0": {
        "interface": "eno3",
        "purpose": "WAN - Router VM",
        "vlanAware": true,
        "stp": false
      },
      "vmbr1": {
        "interface": "eno4",
        "purpose": "LAN - Internal Network",
        "ip": "192.168.100.1/24",
        "vlanAware": true,
        "stp": false
      },
      "vmbr2": {
        "interface": "eno5",
        "purpose": "macOS VM Network",
        "vlanAware": false,
        "stp": false
      },
      "vmbr3": {
        "interface": "eno6",
        "purpose": "Storage Network",
        "vlanAware": false,
        "stp": false
      }
    },
    "telus": {
      "isp": "Telus Communications",
      "connection": "Fiber 10Gbps",
      "bgp": {
        "localAS": "394955",
        "remoteAS": "6939",
        "gateways": [
          {
            "name": "Telus Gateway 1",
            "ip": "206.75.1.127",
            "priority": 1,
            "enabled": true
          },
          {
            "name": "Telus Gateway 2",
            "ip": "206.75.1.47",
            "priority": 2,
            "enabled": true
          },
          {
            "name": "Telus Gateway 3",
            "ip": "206.75.1.48",
            "priority": 3,
            "enabled": true
          }
        ]
      },
      "ipv6": {
        "prefix": "2602:F674::/48",
        "allocation": "2602:F674:1000::/64"
      }
    }
  },
  "virtualMachines": {
    "router": {
      "id": 200,
      "name": "ORION-Router",
      "os": "NixOS 24.11 + VyOS",
      "description": "High-performance router with VyOS, BGP, and nftables firewall",
      "resources": {
        "cpu": {
          "cores": 8,
          "type": "host",
          "sockets": 1,
          "numa": true
        },
        "memory": "32GB",
        "storage": "50GB"
      },
      "network": [
        {
          "id": "net0",
          "bridge": "vmbr0",
          "model": "virtio",
          "purpose": "WAN (Telus Fiber)",
          "mac": "auto"
        },
        {
          "id": "net1",
          "bridge": "vmbr1",
          "model": "virtio",
          "purpose": "LAN (192.168.100.0/24)",
          "mac": "auto"
        },
        {
          "id": "net2",
          "bridge": "vmbr2",
          "model": "virtio",
          "purpose": "Guest Network (192.168.200.0/24)",
          "mac": "auto"
        },
        {
          "id": "net3",
          "bridge": "vmbr1",
          "model": "virtio",
          "purpose": "Management (192.168.1.0/24)",
          "mac": "auto"
        }
      ],
      "services": [
        "BIRD2 BGP (AS 394955)",
        "VyOS Routing",
        "Unbound DNS (192.168.100.1)",
        "Kea DHCP Server",
        "nftables Firewall",
        "Prometheus Node Exporter"
      ],
      "autostart": true,
      "startupOrder": 1,
      "startupDelay": 30,
      "configPath": "vm-configs/router-vm/configuration.nix"
    },
    "aiAgent": {
      "id": 300,
      "name": "ORION-AI-Agent",
      "os": "NixOS 24.11",
      "description": "Autonomous network monitoring and management agent",
      "resources": {
        "cpu": {
          "cores": 4,
          "type": "host",
          "sockets": 1,
          "numa": false
        },
        "memory": "16GB",
        "storage": "50GB"
      },
      "network": [
        {
          "id": "net0",
          "bridge": "vmbr1",
          "model": "virtio",
          "purpose": "LAN (192.168.100.20)",
          "mac": "auto"
        }
      ],
      "services": [
        "Autonomous Network Agent (Python)",
        "Prometheus Server (port 9090)",
        "Grafana Dashboard (port 3000)",
        "Alert Manager",
        "Prometheus Node Exporter"
      ],
      "autostart": true,
      "startupOrder": 2,
      "startupDelay": 15,
      "configPath": "vm-configs/ai-agent-vm/configuration.nix"
    },
    "macOS": {
      "id": 100,
      "name": "HACK-Sequoia-01",
      "os": "macOS Sequoia 15",
      "resources": {
        "cpu": {
          "cores": 12,
          "type": "Haswell-noTSX",
          "sockets": 1,
          "numa": false
        },
        "memory": "64GB",
        "storage": "256GB"
      },
      "network": [
        {
          "id": "net0",
          "bridge": "vmbr2",
          "model": "virtio",
          "purpose": "Primary"
        }
      ],
      "opencore": {
        "version": "1.0.4",
        "smbios": "iMacPro1,1",
        "sip": "enabled",
        "secureBootModel": "Default"
      },
      "autostart": false,
      "startupOrder": 10
    }
  },
  "resourceAllocation": {
    "proxmoxHost": {
      "cpuCores": 4,
      "memory": "16GB",
      "purpose": "Hypervisor overhead"
    },
    "routerVM": {
      "cpuCores": 8,
      "memory": "32GB",
      "purpose": "NixOS + VyOS routing, BGP, firewall, DHCP, DNS"
    },
    "aiAgentVM": {
      "cpuCores": 4,
      "memory": "16GB",
      "purpose": "Autonomous monitoring, Prometheus, Grafana"
    },
    "macOSPrimary": {
      "cpuCores": 12,
      "memory": "64GB",
      "purpose": "macOS Sequoia development"
    },
    "macOSSecondary": {
      "cpuCores": 8,
      "memory": "32GB",
      "purpose": "macOS Sonoma testing (optional)"
    },
    "developmentVMs": {
      "cpuCores": 20,
      "memory": "224GB",
      "purpose": "Linux/Windows VMs, containers, CI/CD"
    },
    "totalAllocated": {
      "cpuCores": 56,
      "memory": "384GB",
      "note": "Includes Router VM (8), AI Agent VM (4), macOS Primary (12), Proxmox (4), Development (20+)"
    }
  },
  "monitoring": {
    "prometheus": {
      "enabled": true,
      "port": 9090,
      "retention": "30d"
    },
    "grafana": {
      "enabled": true,
      "port": 3000,
      "dashboards": [
        "Proxmox Node Exporter",
        "pfSense Dashboard",
        "VM Resource Usage"
      ]
    },
    "alerting": {
      "enabled": true,
      "channels": [
        {
          "type": "email",
          "address": "admin@orion.local"
        }
      ],
      "rules": [
        "High CPU usage (>90% for 5 minutes)",
        "High memory usage (>95%)",
        "BGP session down",
        "Gateway unreachable",
        "Disk usage >85%",
        "VM offline unexpectedly"
      ]
    }
  },
  "backup": {
    "enabled": true,
    "schedule": "daily 2:00 AM",
    "retention": {
      "daily": 7,
      "weekly": 4,
      "monthly": 3
    },
    "targets": [
      {
        "type": "PBS",
        "name": "Proxmox Backup Server",
        "location": "local-pbs"
      },
      {
        "type": "NFS",
        "name": "Network Storage",
        "location": "192.168.100.50:/backup"
      }
    ],
    "excludes": [
      "VM 100 - HACK-Sequoia-01 (optional - large disk)"
    ]
  },
  "deployment": {
    "version": "2.0.0-hybrid",
    "architecture": "Proxmox + NixOS/VyOS Router + AI Agent + macOS",
    "deployedDate": "",
    "deployedBy": "ORION Hybrid Deployment System",
    "lastModified": "2025-01-20",
    "status": "pending",
    "features": [
      "Full iDRAC Redfish API automation",
      "Proxmox VE 8.x hypervisor",
      "NixOS 24.11 + VyOS router VM (replaces pfSense)",
      "Autonomous AI network agent",
      "macOS Sequoia support via OSX-PROXMOX",
      "BGP routing with BIRD2 (AS 394955)",
      "Prometheus + Grafana monitoring",
      "Declarative NixOS configurations",
      "Self-healing network automation"
    ],
    "deploymentScript": "deploy-orion-hybrid.py",
    "legacyScript": "deploy-orion.sh"
  }
}
